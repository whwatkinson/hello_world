FROM postgres:bullseye


RUN apt-get update -y && \
    apt-get install -y postgresql-client libgeos-dev wait-for-it

ENV POSTGRES_DB="postgres"
ENV POSTGRES_USER="postgres"
ENV POSTGRES_PASSWORD="postgres"

COPY hello_world.sh .
EXPOSE 5432
USER postgres
#CMD ["./my_entrypoint.sh"]
#CMD ["postgres"]
CMD ["tail", "-f", "/dev/null"]


#RUN echo "SELECT 'Hello, World\!' AS hello_message;" | psql postgresql://postgres:postgres@localhost:5432/postgres

# 'postgresql://postgres:wiggle@localhost:5432/postgres'

#psql -h localhost -p 5432 -U postgres -d postgres


#CMD ["echo", "\"SELECT 'Hello, World!' AS hello_message;\"", "|", "psql", "postgresql://postgres:postgress@localhost:5432/postgres"]
#USER postgress
#RUN postgres && echo "SELECT 'Hello, World\!' AS hello_message;" | psql postgresql://postgres:postgres@localhost:5432/postgres