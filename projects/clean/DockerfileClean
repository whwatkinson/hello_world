FROM ubuntu:22.04

RUN apt-get update -y && \
    apt-get install -y curl jq gcc libz3-4 make


RUN curl https://clean-lang.org/install.sh | /bin/sh

ENV PATH=root/.nitrile/bin:$PATH

COPY app.icl .
COPY nitrile.yml .

RUN nitrile update
RUN nitrile fetch
RUN nitrile build

CMD ["./app"]

# todo remove extra info after hello world
# https://clean-and-itasks.gitlab.io/nitrile/intro/getting-started/
# https://clean-and-itasks.gitlab.io/nitrile/nitrile-yml/reference/#build